(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */(()=>{const t=()=>localStorage.getItem("theme"),e=i=>localStorage.setItem("theme",i),n=()=>{const i=t();return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},r=i=>{i==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.setAttribute("data-bs-theme",i)};r(n());const o=(i,a=!1)=>{const s=document.querySelector("#bd-theme");if(!s)return;const l=document.querySelector("#bd-theme-text"),c=document.querySelector(".theme-icon-active use"),u=document.querySelector(`[data-bs-theme-value="${i}"]`),d=u.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(f=>{f.classList.remove("active"),f.setAttribute("aria-pressed","false")}),u.classList.add("active"),u.setAttribute("aria-pressed","true"),c.setAttribute("href",d);const p=`${l.textContent} (${u.dataset.bsThemeValue})`;s.setAttribute("aria-label",p),a&&s.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const i=t();i!=="light"&&i!=="dark"&&r(n())}),window.addEventListener("DOMContentLoaded",()=>{o(n()),document.querySelectorAll("[data-bs-theme-value]").forEach(i=>{i.addEventListener("click",()=>{const a=i.getAttribute("data-bs-theme-value");e(a),r(a),o(a,!0)})})})})();const Ce=new Map,dn={set(t,e,n){Ce.has(t)||Ce.set(t,new Map);const r=Ce.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return Ce.has(t)&&Ce.get(t).get(e)||null},remove(t,e){if(!Ce.has(t))return;const n=Ce.get(t);n.delete(e),n.size===0&&Ce.delete(t)}},Oi=1e3,Cn="transitionend",oo=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),Ci=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),ki=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),o=Number.parseFloat(n);return!r&&!o?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*Oi)},Ni=t=>{t.dispatchEvent(new Event(Cn))},Pe=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),Vt=t=>Pe(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(oo(t)):null,en=t=>{if(!Pe(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},St=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",yr=()=>{},io=t=>{t.offsetHeight},ao=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,fn=[],Ii=t=>{document.readyState==="loading"?(fn.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of fn)e()}),fn.push(t)):t()},Be=()=>document.documentElement.dir==="rtl",Rn=t=>{Ii(()=>{const e=ao();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},Ne=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,so=(t,e,n=!0)=>{if(!n){Ne(t);return}const r=5,o=ki(e)+r;let i=!1;const a=({target:s})=>{s===e&&(i=!0,e.removeEventListener(Cn,a),Ne(t))};e.addEventListener(Cn,a),setTimeout(()=>{i||Ni(e)},o)},Li=(t,e,n,r)=>{const o=t.length;let i=t.indexOf(e);return i===-1?!n&&r?t[o-1]:t[0]:(i+=n?1:-1,r&&(i=(i+o)%o),t[Math.max(0,Math.min(i,o-1))])},Pi=/[^.]*(?=\..*)\.|.*/,xi=/\..*/,Bi=/::\d+$/,pn={};let _r=1;const lo={mouseenter:"mouseover",mouseleave:"mouseout"},$i=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function co(t,e){return e&&`${e}::${_r++}`||t.uidEvent||_r++}function uo(t){const e=co(t);return t.uidEvent=e,pn[e]=pn[e]||{},pn[e]}function Fi(t,e){return function n(r){return Hn(r,{delegateTarget:t}),n.oneOff&&y.off(t,r.type,e),e.apply(t,[r])}}function Mi(t,e,n){return function r(o){const i=t.querySelectorAll(e);for(let{target:a}=o;a&&a!==this;a=a.parentNode)for(const s of i)if(s===a)return Hn(o,{delegateTarget:a}),r.oneOff&&y.off(t,o.type,e,n),n.apply(a,[o])}}function fo(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function po(t,e,n){const r=typeof e=="string",o=r?n:e||n;let i=ho(t);return $i.has(i)||(i=t),[r,o,i]}function wr(t,e,n,r,o){if(typeof e!="string"||!t)return;let[i,a,s]=po(e,n,r);e in lo&&(a=(g=>function(m){if(!m.relatedTarget||m.relatedTarget!==m.delegateTarget&&!m.delegateTarget.contains(m.relatedTarget))return g.call(this,m)})(a));const l=uo(t),c=l[s]||(l[s]={}),u=fo(c,a,i?n:null);if(u){u.oneOff=u.oneOff&&o;return}const d=co(a,e.replace(Pi,"")),p=i?Mi(t,n,a):Fi(t,a);p.delegationSelector=i?n:null,p.callable=a,p.oneOff=o,p.uidEvent=d,c[d]=p,t.addEventListener(s,p,i)}function kn(t,e,n,r,o){const i=fo(e[n],r,o);i&&(t.removeEventListener(n,i,!!o),delete e[n][i.uidEvent])}function Ri(t,e,n,r){const o=e[n]||{};for(const[i,a]of Object.entries(o))i.includes(r)&&kn(t,e,n,a.callable,a.delegationSelector)}function ho(t){return t=t.replace(xi,""),lo[t]||t}const y={on(t,e,n,r){wr(t,e,n,r,!1)},one(t,e,n,r){wr(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[o,i,a]=po(e,n,r),s=a!==e,l=uo(t),c=l[a]||{},u=e.startsWith(".");if(typeof i<"u"){if(!Object.keys(c).length)return;kn(t,l,a,i,o?n:null);return}if(u)for(const d of Object.keys(l))Ri(t,l,d,e.slice(1));for(const[d,p]of Object.entries(c)){const f=d.replace(Bi,"");(!s||e.includes(f))&&kn(t,l,a,p.callable,p.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=ao(),o=ho(e),i=e!==o;let a=null,s=!0,l=!0,c=!1;i&&r&&(a=r.Event(e,n),r(t).trigger(a),s=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),c=a.isDefaultPrevented());const u=Hn(new Event(e,{bubbles:s,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&a&&a.preventDefault(),u}};function Hn(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}function Ar(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function hn(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Ke={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${hn(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${hn(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let o=r.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=Ar(t.dataset[r])}return e},getDataAttribute(t,e){return Ar(t.getAttribute(`data-bs-${hn(e)}`))}};class Wn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=Pe(n)?Ke.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Pe(n)?Ke.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[r,o]of Object.entries(n)){const i=e[r],a=Pe(i)?"element":Ci(i);if(!new RegExp(o).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${o}".`)}}}const Hi="5.3.2";class jn extends Wn{constructor(e,n){super(),e=Vt(e),e&&(this._element=e,this._config=this._getConfig(n),dn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){dn.remove(this._element,this.constructor.DATA_KEY),y.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){so(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return dn.get(Vt(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return Hi}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const mn=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?oo(n.trim()):null}return e},W={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!St(n)&&en(n))},getSelectorFromElement(t){const e=mn(t);return e&&W.findOne(e)?e:null},getElementFromSelector(t){const e=mn(t);return e?W.findOne(e):null},getMultipleElementsFromSelector(t){const e=mn(t);return e?W.find(e):[]}},mo="backdrop",Wi="fade",Tr="show",Sr=`mousedown.bs.${mo}`,ji={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yi={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class go extends Wn{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return ji}static get DefaultType(){return Yi}static get NAME(){return mo}show(e){if(!this._config.isVisible){Ne(e);return}this._append();const n=this._getElement();this._config.isAnimated&&io(n),n.classList.add(Tr),this._emulateAnimation(()=>{Ne(e)})}hide(e){if(!this._config.isVisible){Ne(e);return}this._getElement().classList.remove(Tr),this._emulateAnimation(()=>{this.dispose(),Ne(e)})}dispose(){this._isAppended&&(y.off(this._element,Sr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Wi),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Vt(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),y.on(e,Sr,()=>{Ne(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){so(e,this._getElement(),this._config.isAnimated)}}const vo=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;y.on(document,n,`[data-bs-dismiss="${r}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),St(this))return;const i=W.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(i)[e]()})},Ki="focustrap",Vi="bs.focustrap",Ut=`.${Vi}`,Ui=`focusin${Ut}`,Gi=`keydown.tab${Ut}`,zi="Tab",Xi="forward",Dr="backward",qi={autofocus:!0,trapElement:null},Ji={autofocus:"boolean",trapElement:"element"};class bo extends Wn{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return qi}static get DefaultType(){return Ji}static get NAME(){return Ki}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),y.off(document,Ut),y.on(document,Ui,e=>this._handleFocusin(e)),y.on(document,Gi,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,y.off(document,Ut))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=W.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===Dr?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===zi&&(this._lastTabNavDirection=e.shiftKey?Dr:Xi)}}const Or=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Cr=".sticky-top",Lt="padding-right",kr="margin-right";class Nn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Lt,n=>n+e),this._setElementAttributes(Or,Lt,n=>n+e),this._setElementAttributes(Cr,kr,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Lt),this._resetElementAttributes(Or,Lt),this._resetElementAttributes(Cr,kr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const o=this.getWidth(),i=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+o)return;this._saveInitialAttribute(a,n);const s=window.getComputedStyle(a).getPropertyValue(n);a.style.setProperty(n,`${r(Number.parseFloat(s))}px`)};this._applyManipulationCallback(e,i)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&Ke.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=o=>{const i=Ke.getDataAttribute(o,n);if(i===null){o.style.removeProperty(n);return}Ke.removeDataAttribute(o,n),o.style.setProperty(n,i)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(Pe(e)){n(e);return}for(const r of W.find(e,this._element))n(r)}}const Qi="offcanvas",Zi="bs.offcanvas",Se=`.${Zi}`,Eo=".data-api",ea=`load${Se}${Eo}`,ta="Escape",Nr="show",Ir="showing",Lr="hiding",na="offcanvas-backdrop",yo=".offcanvas.show",ra=`show${Se}`,oa=`shown${Se}`,ia=`hide${Se}`,Pr=`hidePrevented${Se}`,_o=`hidden${Se}`,aa=`resize${Se}`,sa=`click${Se}${Eo}`,la=`keydown.dismiss${Se}`,ca='[data-bs-toggle="offcanvas"]',ua={backdrop:!0,keyboard:!0,scroll:!1},da={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class we extends jn{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ua}static get DefaultType(){return da}static get NAME(){return Qi}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||y.trigger(this._element,ra,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Nn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ir);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Nr),this._element.classList.remove(Ir),y.trigger(this._element,oa,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||y.trigger(this._element,ia).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Lr),this._backdrop.hide();const n=()=>{this._element.classList.remove(Nr,Lr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Nn().reset(),y.trigger(this._element,_o)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){y.trigger(this._element,Pr);return}this.hide()},n=!!this._config.backdrop;return new go({className:na,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new bo({trapElement:this._element})}_addEventListeners(){y.on(this._element,la,e=>{if(e.key===ta){if(this._config.keyboard){this.hide();return}y.trigger(this._element,Pr)}})}static jQueryInterface(e){return this.each(function(){const n=we.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}y.on(document,sa,ca,function(t){const e=W.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),St(this))return;y.one(e,_o,()=>{en(this)&&this.focus()});const n=W.findOne(yo);n&&n!==e&&we.getInstance(n).hide(),we.getOrCreateInstance(e).toggle(this)});y.on(window,ea,()=>{for(const t of W.find(yo))we.getOrCreateInstance(t).show()});y.on(window,aa,()=>{for(const t of W.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&we.getOrCreateInstance(t).hide()});vo(we);Rn(we);var q="top",re="bottom",oe="right",J="left",tn="auto",dt=[q,re,oe,J],Ue="start",it="end",wo="clippingParents",Yn="viewport",et="popper",Ao="reference",In=dt.reduce(function(t,e){return t.concat([e+"-"+Ue,e+"-"+it])},[]),Kn=[].concat(dt,[tn]).reduce(function(t,e){return t.concat([e,e+"-"+Ue,e+"-"+it])},[]),To="beforeRead",So="read",Do="afterRead",Oo="beforeMain",Co="main",ko="afterMain",No="beforeWrite",Io="write",Lo="afterWrite",Po=[To,So,Do,Oo,Co,ko,No,Io,Lo];function be(t){return t?(t.nodeName||"").toLowerCase():null}function ie(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ge(t){var e=ie(t).Element;return t instanceof e||t instanceof Element}function se(t){var e=ie(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Vn(t){if(typeof ShadowRoot>"u")return!1;var e=ie(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function fa(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},i=e.elements[n];!se(i)||!be(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(a){var s=o[a];s===!1?i.removeAttribute(a):i.setAttribute(a,s===!0?"":s)}))})}function pa(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(l,c){return l[c]="",l},{});!se(o)||!be(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(l){o.removeAttribute(l)}))})}}const Un={name:"applyStyles",enabled:!0,phase:"write",fn:fa,effect:pa,requires:["computeStyles"]};function me(t){return t.split("-")[0]}var Ve=Math.max,Gt=Math.min,at=Math.round;function Ln(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function xo(){return!/^((?!chrome|android).)*safari/i.test(Ln())}function st(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,i=1;e&&se(t)&&(o=t.offsetWidth>0&&at(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&at(r.height)/t.offsetHeight||1);var a=Ge(t)?ie(t):window,s=a.visualViewport,l=!xo()&&n,c=(r.left+(l&&s?s.offsetLeft:0))/o,u=(r.top+(l&&s?s.offsetTop:0))/i,d=r.width/o,p=r.height/i;return{width:d,height:p,top:u,right:c+d,bottom:u+p,left:c,x:c,y:u}}function Gn(t){var e=st(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Bo(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Vn(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ae(t){return ie(t).getComputedStyle(t)}function ha(t){return["table","td","th"].indexOf(be(t))>=0}function $e(t){return((Ge(t)?t.ownerDocument:t.document)||window.document).documentElement}function nn(t){return be(t)==="html"?t:t.assignedSlot||t.parentNode||(Vn(t)?t.host:null)||$e(t)}function xr(t){return!se(t)||Ae(t).position==="fixed"?null:t.offsetParent}function ma(t){var e=/firefox/i.test(Ln()),n=/Trident/i.test(Ln());if(n&&se(t)){var r=Ae(t);if(r.position==="fixed")return null}var o=nn(t);for(Vn(o)&&(o=o.host);se(o)&&["html","body"].indexOf(be(o))<0;){var i=Ae(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function Dt(t){for(var e=ie(t),n=xr(t);n&&ha(n)&&Ae(n).position==="static";)n=xr(n);return n&&(be(n)==="html"||be(n)==="body"&&Ae(n).position==="static")?e:n||ma(t)||e}function zn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function vt(t,e,n){return Ve(t,Gt(e,n))}function ga(t,e,n){var r=vt(t,e,n);return r>n?n:r}function $o(){return{top:0,right:0,bottom:0,left:0}}function Fo(t){return Object.assign({},$o(),t)}function Mo(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var va=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Fo(typeof e!="number"?e:Mo(e,dt))};function ba(t){var e,n=t.state,r=t.name,o=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=me(n.placement),l=zn(s),c=[J,oe].indexOf(s)>=0,u=c?"height":"width";if(!(!i||!a)){var d=va(o.padding,n),p=Gn(i),f=l==="y"?q:J,g=l==="y"?re:oe,m=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],_=a[l]-n.rects.reference[l],D=Dt(i),T=D?l==="y"?D.clientHeight||0:D.clientWidth||0:0,O=m/2-_/2,v=d[f],S=T-p[u]-d[g],A=T/2-p[u]/2+O,I=vt(v,A,S),F=l;n.modifiersData[r]=(e={},e[F]=I,e.centerOffset=I-A,e)}}function Ea(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||Bo(e.elements.popper,o)&&(e.elements.arrow=o))}const Ro={name:"arrow",enabled:!0,phase:"main",fn:ba,effect:Ea,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function lt(t){return t.split("-")[1]}var ya={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _a(t,e){var n=t.x,r=t.y,o=e.devicePixelRatio||1;return{x:at(n*o)/o||0,y:at(r*o)/o||0}}function Br(t){var e,n=t.popper,r=t.popperRect,o=t.placement,i=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,p=a.x,f=p===void 0?0:p,g=a.y,m=g===void 0?0:g,_=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=_.x,m=_.y;var D=a.hasOwnProperty("x"),T=a.hasOwnProperty("y"),O=J,v=q,S=window;if(c){var A=Dt(n),I="clientHeight",F="clientWidth";if(A===ie(n)&&(A=$e(n),Ae(A).position!=="static"&&s==="absolute"&&(I="scrollHeight",F="scrollWidth")),A=A,o===q||(o===J||o===oe)&&i===it){v=re;var k=d&&A===S&&S.visualViewport?S.visualViewport.height:A[I];m-=k-r.height,m*=l?1:-1}if(o===J||(o===q||o===re)&&i===it){O=oe;var P=d&&A===S&&S.visualViewport?S.visualViewport.width:A[F];f-=P-r.width,f*=l?1:-1}}var x=Object.assign({position:s},c&&ya),K=u===!0?_a({x:f,y:m},ie(n)):{x:f,y:m};if(f=K.x,m=K.y,l){var B;return Object.assign({},x,(B={},B[v]=T?"0":"",B[O]=D?"0":"",B.transform=(S.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",B))}return Object.assign({},x,(e={},e[v]=T?m+"px":"",e[O]=D?f+"px":"",e.transform="",e))}function wa(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,s=n.roundOffsets,l=s===void 0?!0:s,c={placement:me(e.placement),variation:lt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Br(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Br(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Xn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:wa,data:{}};var Pt={passive:!0};function Aa(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,i=o===void 0?!0:o,a=r.resize,s=a===void 0?!0:a,l=ie(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",n.update,Pt)}),s&&l.addEventListener("resize",n.update,Pt),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Pt)}),s&&l.removeEventListener("resize",n.update,Pt)}}const qn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Aa,data:{}};var Ta={left:"right",right:"left",bottom:"top",top:"bottom"};function Mt(t){return t.replace(/left|right|bottom|top/g,function(e){return Ta[e]})}var Sa={start:"end",end:"start"};function $r(t){return t.replace(/start|end/g,function(e){return Sa[e]})}function Jn(t){var e=ie(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Qn(t){return st($e(t)).left+Jn(t).scrollLeft}function Da(t,e){var n=ie(t),r=$e(t),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;var c=xo();(c||!c&&e==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s+Qn(t),y:l}}function Oa(t){var e,n=$e(t),r=Jn(t),o=(e=t.ownerDocument)==null?void 0:e.body,i=Ve(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Ve(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Qn(t),l=-r.scrollTop;return Ae(o||n).direction==="rtl"&&(s+=Ve(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:l}}function Zn(t){var e=Ae(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Ho(t){return["html","body","#document"].indexOf(be(t))>=0?t.ownerDocument.body:se(t)&&Zn(t)?t:Ho(nn(t))}function bt(t,e){var n;e===void 0&&(e=[]);var r=Ho(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),i=ie(r),a=o?[i].concat(i.visualViewport||[],Zn(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(bt(nn(a)))}function Pn(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ca(t,e){var n=st(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Fr(t,e,n){return e===Yn?Pn(Da(t,n)):Ge(e)?Ca(e,n):Pn(Oa($e(t)))}function ka(t){var e=bt(nn(t)),n=["absolute","fixed"].indexOf(Ae(t).position)>=0,r=n&&se(t)?Dt(t):t;return Ge(r)?e.filter(function(o){return Ge(o)&&Bo(o,r)&&be(o)!=="body"}):[]}function Na(t,e,n,r){var o=e==="clippingParents"?ka(t):[].concat(e),i=[].concat(o,[n]),a=i[0],s=i.reduce(function(l,c){var u=Fr(t,c,r);return l.top=Ve(u.top,l.top),l.right=Gt(u.right,l.right),l.bottom=Gt(u.bottom,l.bottom),l.left=Ve(u.left,l.left),l},Fr(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Wo(t){var e=t.reference,n=t.element,r=t.placement,o=r?me(r):null,i=r?lt(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(o){case q:l={x:a,y:e.y-n.height};break;case re:l={x:a,y:e.y+e.height};break;case oe:l={x:e.x+e.width,y:s};break;case J:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var c=o?zn(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case Ue:l[c]=l[c]-(e[u]/2-n[u]/2);break;case it:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function ct(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,i=n.strategy,a=i===void 0?t.strategy:i,s=n.boundary,l=s===void 0?wo:s,c=n.rootBoundary,u=c===void 0?Yn:c,d=n.elementContext,p=d===void 0?et:d,f=n.altBoundary,g=f===void 0?!1:f,m=n.padding,_=m===void 0?0:m,D=Fo(typeof _!="number"?_:Mo(_,dt)),T=p===et?Ao:et,O=t.rects.popper,v=t.elements[g?T:p],S=Na(Ge(v)?v:v.contextElement||$e(t.elements.popper),l,u,a),A=st(t.elements.reference),I=Wo({reference:A,element:O,strategy:"absolute",placement:o}),F=Pn(Object.assign({},O,I)),k=p===et?F:A,P={top:S.top-k.top+D.top,bottom:k.bottom-S.bottom+D.bottom,left:S.left-k.left+D.left,right:k.right-S.right+D.right},x=t.modifiersData.offset;if(p===et&&x){var K=x[o];Object.keys(P).forEach(function(B){var z=[oe,re].indexOf(B)>=0?1:-1,Z=[q,re].indexOf(B)>=0?"y":"x";P[B]+=K[Z]*z})}return P}function Ia(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Kn:l,u=lt(r),d=u?s?In:In.filter(function(g){return lt(g)===u}):dt,p=d.filter(function(g){return c.indexOf(g)>=0});p.length===0&&(p=d);var f=p.reduce(function(g,m){return g[m]=ct(t,{placement:m,boundary:o,rootBoundary:i,padding:a})[me(m)],g},{});return Object.keys(f).sort(function(g,m){return f[g]-f[m]})}function La(t){if(me(t)===tn)return[];var e=Mt(t);return[$r(t),e,$r(e)]}function Pa(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,g=f===void 0?!0:f,m=n.allowedAutoPlacements,_=e.options.placement,D=me(_),T=D===_,O=l||(T||!g?[Mt(_)]:La(_)),v=[_].concat(O).reduce(function(Je,Oe){return Je.concat(me(Oe)===tn?Ia(e,{placement:Oe,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:m}):Oe)},[]),S=e.rects.reference,A=e.rects.popper,I=new Map,F=!0,k=v[0],P=0;P<v.length;P++){var x=v[P],K=me(x),B=lt(x)===Ue,z=[q,re].indexOf(K)>=0,Z=z?"width":"height",R=ct(e,{placement:x,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),U=z?B?oe:J:B?re:q;S[Z]>A[Z]&&(U=Mt(U));var ue=Mt(U),ye=[];if(i&&ye.push(R[K]<=0),s&&ye.push(R[U]<=0,R[ue]<=0),ye.every(function(Je){return Je})){k=x,F=!1;break}I.set(x,ye)}if(F)for(var ft=g?3:1,qe=function(Oe){var pt=v.find(function(Nt){var Me=I.get(Nt);if(Me)return Me.slice(0,Oe).every(function(ln){return ln})});if(pt)return k=pt,"break"},Fe=ft;Fe>0;Fe--){var kt=qe(Fe);if(kt==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const jo={name:"flip",enabled:!0,phase:"main",fn:Pa,requiresIfExists:["offset"],data:{_skip:!1}};function Mr(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Rr(t){return[q,oe,re,J].some(function(e){return t[e]>=0})}function xa(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,a=ct(e,{elementContext:"reference"}),s=ct(e,{altBoundary:!0}),l=Mr(a,r),c=Mr(s,o,i),u=Rr(l),d=Rr(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const Yo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xa};function Ba(t,e,n){var r=me(t),o=[J,q].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[J,oe].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function $a(t){var e=t.state,n=t.options,r=t.name,o=n.offset,i=o===void 0?[0,0]:o,a=Kn.reduce(function(u,d){return u[d]=Ba(d,e.rects,i),u},{}),s=a[e.placement],l=s.x,c=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}const Ko={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$a};function Fa(t){var e=t.state,n=t.name;e.modifiersData[n]=Wo({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const er={name:"popperOffsets",enabled:!0,phase:"read",fn:Fa,data:{}};function Ma(t){return t==="x"?"y":"x"}function Ra(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,f=p===void 0?!0:p,g=n.tetherOffset,m=g===void 0?0:g,_=ct(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),D=me(e.placement),T=lt(e.placement),O=!T,v=zn(D),S=Ma(v),A=e.modifiersData.popperOffsets,I=e.rects.reference,F=e.rects.popper,k=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,P=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),x=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,K={x:0,y:0};if(A){if(i){var B,z=v==="y"?q:J,Z=v==="y"?re:oe,R=v==="y"?"height":"width",U=A[v],ue=U+_[z],ye=U-_[Z],ft=f?-F[R]/2:0,qe=T===Ue?I[R]:F[R],Fe=T===Ue?-F[R]:-I[R],kt=e.elements.arrow,Je=f&&kt?Gn(kt):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$o(),pt=Oe[z],Nt=Oe[Z],Me=vt(0,I[R],Je[R]),ln=O?I[R]/2-ft-Me-pt-P.mainAxis:qe-Me-pt-P.mainAxis,_i=O?-I[R]/2+ft+Me+Nt+P.mainAxis:Fe+Me+Nt+P.mainAxis,cn=e.elements.arrow&&Dt(e.elements.arrow),wi=cn?v==="y"?cn.clientTop||0:cn.clientLeft||0:0,dr=(B=x?.[v])!=null?B:0,Ai=U+ln-dr-wi,Ti=U+_i-dr,fr=vt(f?Gt(ue,Ai):ue,U,f?Ve(ye,Ti):ye);A[v]=fr,K[v]=fr-U}if(s){var pr,Si=v==="x"?q:J,Di=v==="x"?re:oe,Re=A[S],It=S==="y"?"height":"width",hr=Re+_[Si],mr=Re-_[Di],un=[q,J].indexOf(D)!==-1,gr=(pr=x?.[S])!=null?pr:0,vr=un?hr:Re-I[It]-F[It]-gr+P.altAxis,br=un?Re+I[It]+F[It]-gr-P.altAxis:mr,Er=f&&un?ga(vr,Re,br):vt(f?vr:hr,Re,f?br:mr);A[S]=Er,K[S]=Er-Re}e.modifiersData[r]=K}}const Vo={name:"preventOverflow",enabled:!0,phase:"main",fn:Ra,requiresIfExists:["offset"]};function Ha(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Wa(t){return t===ie(t)||!se(t)?Jn(t):Ha(t)}function ja(t){var e=t.getBoundingClientRect(),n=at(e.width)/t.offsetWidth||1,r=at(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Ya(t,e,n){n===void 0&&(n=!1);var r=se(e),o=se(e)&&ja(e),i=$e(e),a=st(t,o,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((be(e)!=="body"||Zn(i))&&(s=Wa(e)),se(e)?(l=st(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=Qn(i))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Ka(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function o(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&o(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||o(i)}),r}function Va(t){var e=Ka(t);return Po.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function Ua(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Ga(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Hr={placement:"bottom",modifiers:[],strategy:"absolute"};function Wr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function rn(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,i=o===void 0?Hr:o;return function(s,l,c){c===void 0&&(c=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Hr,i),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],p=!1,f={state:u,setOptions:function(D){var T=typeof D=="function"?D(u.options):D;m(),u.options=Object.assign({},i,u.options,T),u.scrollParents={reference:Ge(s)?bt(s):s.contextElement?bt(s.contextElement):[],popper:bt(l)};var O=Va(Ga([].concat(r,u.options.modifiers)));return u.orderedModifiers=O.filter(function(v){return v.enabled}),g(),f.update()},forceUpdate:function(){if(!p){var D=u.elements,T=D.reference,O=D.popper;if(Wr(T,O)){u.rects={reference:Ya(T,Dt(O),u.options.strategy==="fixed"),popper:Gn(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(P){return u.modifiersData[P.name]=Object.assign({},P.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var S=u.orderedModifiers[v],A=S.fn,I=S.options,F=I===void 0?{}:I,k=S.name;typeof A=="function"&&(u=A({state:u,options:F,name:k,instance:f})||u)}}}},update:Ua(function(){return new Promise(function(_){f.forceUpdate(),_(u)})}),destroy:function(){m(),p=!0}};if(!Wr(s,l))return f;f.setOptions(c).then(function(_){!p&&c.onFirstUpdate&&c.onFirstUpdate(_)});function g(){u.orderedModifiers.forEach(function(_){var D=_.name,T=_.options,O=T===void 0?{}:T,v=_.effect;if(typeof v=="function"){var S=v({state:u,name:D,instance:f,options:O}),A=function(){};d.push(S||A)}})}function m(){d.forEach(function(_){return _()}),d=[]}return f}}var za=rn(),Xa=[qn,er,Xn,Un],qa=rn({defaultModifiers:Xa}),Ja=[qn,er,Xn,Un,Ko,jo,Vo,Ro,Yo],Uo=rn({defaultModifiers:Ja});const Qa=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ko,afterRead:Do,afterWrite:Lo,applyStyles:Un,arrow:Ro,auto:tn,basePlacements:dt,beforeMain:Oo,beforeRead:To,beforeWrite:No,bottom:re,clippingParents:wo,computeStyles:Xn,createPopper:Uo,createPopperBase:za,createPopperLite:qa,detectOverflow:ct,end:it,eventListeners:qn,flip:jo,hide:Yo,left:J,main:Co,modifierPhases:Po,offset:Ko,placements:Kn,popper:et,popperGenerator:rn,popperOffsets:er,preventOverflow:Vo,read:So,reference:Ao,right:oe,start:Ue,top:q,variationPlacements:In,viewport:Yn,write:Io},Symbol.toStringTag,{value:"Module"})),jr="dropdown",Za="bs.dropdown",Xe=`.${Za}`,tr=".data-api",es="Escape",Yr="Tab",ts="ArrowUp",Kr="ArrowDown",ns=2,rs=`hide${Xe}`,os=`hidden${Xe}`,is=`show${Xe}`,as=`shown${Xe}`,Go=`click${Xe}${tr}`,zo=`keydown${Xe}${tr}`,ss=`keyup${Xe}${tr}`,tt="show",ls="dropup",cs="dropend",us="dropstart",ds="dropup-center",fs="dropdown-center",Ye='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ps=`${Ye}.${tt}`,Rt=".dropdown-menu",hs=".navbar",ms=".navbar-nav",gs=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",vs=Be()?"top-end":"top-start",bs=Be()?"top-start":"top-end",Es=Be()?"bottom-end":"bottom-start",ys=Be()?"bottom-start":"bottom-end",_s=Be()?"left-start":"right-start",ws=Be()?"right-start":"left-start",As="top",Ts="bottom",Ss={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ds={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ge extends jn{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,Rt)[0]||W.prev(this._element,Rt)[0]||W.findOne(Rt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ss}static get DefaultType(){return Ds}static get NAME(){return jr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(St(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!y.trigger(this._element,is,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(ms))for(const r of[].concat(...document.body.children))y.on(r,"mouseover",yr);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(tt),this._element.classList.add(tt),y.trigger(this._element,as,e)}}hide(){if(St(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!y.trigger(this._element,rs,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))y.off(r,"mouseover",yr);this._popper&&this._popper.destroy(),this._menu.classList.remove(tt),this._element.classList.remove(tt),this._element.setAttribute("aria-expanded","false"),Ke.removeDataAttribute(this._menu,"popper"),y.trigger(this._element,os,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Pe(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${jr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Qa>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Pe(this._config.reference)?e=Vt(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Uo(e,this._menu,n)}_isShown(){return this._menu.classList.contains(tt)}_getPlacement(){const e=this._parent;if(e.classList.contains(cs))return _s;if(e.classList.contains(us))return ws;if(e.classList.contains(ds))return As;if(e.classList.contains(fs))return Ts;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(ls)?n?bs:vs:n?ys:Es}_detectNavbar(){return this._element.closest(hs)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ke.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ne(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const r=W.find(gs,this._menu).filter(o=>en(o));r.length&&Li(r,n,e===Kr,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=ge.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===ns||e.type==="keyup"&&e.key!==Yr)return;const n=W.find(ps);for(const r of n){const o=ge.getInstance(r);if(!o||o._config.autoClose===!1)continue;const i=e.composedPath(),a=i.includes(o._menu);if(i.includes(o._element)||o._config.autoClose==="inside"&&!a||o._config.autoClose==="outside"&&a||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Yr||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const s={relatedTarget:o._element};e.type==="click"&&(s.clickEvent=e),o._completeHide(s)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===es,o=[ts,Kr].includes(e.key);if(!o&&!r||n&&!r)return;e.preventDefault();const i=this.matches(Ye)?this:W.prev(this,Ye)[0]||W.next(this,Ye)[0]||W.findOne(Ye,e.delegateTarget.parentNode),a=ge.getOrCreateInstance(i);if(o){e.stopPropagation(),a.show(),a._selectMenuItem(e);return}a._isShown()&&(e.stopPropagation(),a.hide(),i.focus())}}y.on(document,zo,Ye,ge.dataApiKeydownHandler);y.on(document,zo,Rt,ge.dataApiKeydownHandler);y.on(document,Go,ge.clearMenus);y.on(document,ss,ge.clearMenus);y.on(document,Go,Ye,function(t){t.preventDefault(),ge.getOrCreateInstance(this).toggle()});Rn(ge);function on(t){return window.btoa(encodeURIComponent(t))}function an(t){return decodeURIComponent(window.atob(t))}function zt(t){return t==="mtr_hr"&&(t="mtr"),`/img/${t}.svg`}function he(t,e={}){let n=document.createElement("template"),r=document.querySelector(`template#${t}`).innerHTML;for(let o in e)r=r.replaceAll(o,e[o]);return n.innerHTML=r.trim(),n.content.firstChild}function xn(t,e=!1){switch(t){case"kmb":return e?"#FFFFFF":"#FF0000";case"ctb":return e?"#0080FF":"#F9BF00";case"nwfb":return e?"#7000CC":"#EF7925";case"nlb":return e?"#3DC9B4":"#2A897B";case"gmb":return e?"#53B776":"#337149";case"mtr":return e?"#53B776":"#1A81FF"}return"#000"}function de(t,e){if(t==="route-hr")switch(e){case"TWL":return"#ff0000";case"KTL":return"#1a9431";case"ISL":return"#0860a8";case"SIL":return"#b5bd00";case"TKL":return"#6b208b";case"AEL":return"#1c7670";case"TCL":return"#fe7f1d";case"DRL":return"#f550a6";case"EAL":return"#5eb6e4";case"TML":return"#9a3b26"}else if(t==="station-hr")switch(e){case"CEN":return"#AA0000";case"ADM":return"#3A86D4";case"TST":return"#FFEF00";case"JOR":return"#69B72B";case"YMT":return"#CCCCCC";case"MOK":return"#BE2700";case"PRE":return"#8674A1";case"SSP":return"#016258";case"CSW":return"#B5A265";case"LCK":return"#E04300";case"MEF":return"#1E90FF";case"LAK":return"#BB2200";case"KWF":return"#233D3A";case"KWH":return"#F1CC00";case"TWH":return"#A2B741";case"TSW":return"#BB2200";case"WHA":return"#AECFF0";case"HOM":return"#A2CF5A";case"SKM":return"#669933";case"KOT":return"#007FFF";case"LOF":return"#579E2F";case"WTS":return"#FFFF00";case"DIH":return"#000000";case"CHH":return"#27408B";case"KOB":return"#C80815";case"NTK":return"#92B6A3";case"KWT":return"#FFFFFF";case"LAT":return"#0083BE";case"YAT":return"#FFEF00";case"TIK":return"#DCD144";case"KET":return"#95D0D0";case"HKU":return"#B8DA89";case"SYP":return"#8B7BA0";case"SHW":return"#FFD280";case"WAC":return"#E1EB2B";case"CAB":return"#C8A2C8";case"TIH":return"#FF7D00";case"FOH":return"#4B8842";case"NOP":return"#E86220";case"QUB":return"#00918C";case"TAK":return"#BB2200";case"SWH":return"#FFCC00";case"SKW":return"#191970";case"HFC":return"#C01204";case"CHW":return"#38510E";case"TKO":return"#E60012";case"HAH":return"#2EA9DF";case"POA":return"#F28500";case"LHP":return"#826F79";case"HOK":return"#FFFAFA";case"KOW":return"#ACA28A";case"OLY":return"#4584C4";case"NAC":return"#F0EE86";case"TSY":return"#A1C6CA";case"SUN":return"#808080";case"TUC":return"#6A5ACD";case"DIS":return"#005533";case"AIR":return"#808080";case"AWE":return"#FFFFFF";case"EXC":return"#94A8B0";case"HUH":return"#F08080";case"MKK":return"#006400";case"TAW":return"#05117E";case"SHT":return"#BB7796";case"FOT":return"#FFA500";case"RAC":return"#15AE69";case"UNI":return"#A2D7DD";case"TAP":return"#976E9A";case"TWO":return"#C89F05";case"FAN":return"#9ACD32";case"SHS":return"#F6A600";case"LOW":return"#8DC476";case"LMC":return"#009E9B";case"WKS":return"#954535";case"MOS":return"#E0B0FF";case"HEO":return"#87CEFA";case"TSH":return"#48D1CC";case"SHM":return"#FBEC5D";case"CIO":return"#FFBF00";case"STW":return"#FFC0CB";case"CKT":return"#FFD280";case"HIK":return"#8FBE6C";case"KAT":return"#FF8C00";case"SUW":return"#D08A00";case"TKW":return"#A9E2F3";case"ETS":return"#FFFF00";case"AUS":return"#B45529";case"TWW":return"#A81C07";case"KSR":return"#CC5500";case"YUL":return"#40F5F5";case"LOP":return"#FFB3BF";case"TIS":return"#FC8A17";case"SIH":return"#7FFFD4";case"TUM":return"#035F94";case"OCP":return"#00BFFF";case"WCH":return"#FFFF00";case"LET":return"#FF7F00";case"SOH":return"#74B11B";case"TCT":return"#274060";case"NPT":return"#274060";case"WEK":return"#808080"}else{if(t==="lr")return"#d3a809";if(t==="route-lr")switch(e){case"505":return"#b53533";case"506P":return"#000";case"507":case"507P":return"#009651";case"610":return"#3d1f1b";case"610P":return"#4dc6f4";case"614":return"#51b5dc";case"614P":return"#d98386";case"615":return"#f9db4f";case"615P":return"#235970";case"705":return"#7eb554";case"706":return"#9f73a0";case"751":return"#d87f3f";case"751P":return"#000";case"761P":return"#592d76"}}return"#000"}function Vr(t,e){if(t==="station-hr"){if(["TST","YMT","CSW","KWH","WHA","HOM","LOF","WTS","KWT","LAT","YAT","TIK","KET","HKU","SYP","WAC","CAB","TIH","NOP","SWH","HAH","POA","HOK","KOW","OLY","NAC","TSY","TUC","DIS","AIR","AWE","HUH","MOS","HEO","TSH","SHM","CIO","STW","CKT","KAT","SUW","TKW","ETS","YUL","LOP","TIS","SIH","WCH","WEK"].includes(e))return"#000";if(e==="SHW")return"#6B4513";if(e==="SUN")return"#C0C0C0";if(e==="DIS")return"#D4AF37";if(e==="HIK")return"#182F4F"}return"#FFF"}function Os(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}const Xo=`${BASE_API}/api/route/{route}.json`,Cs=`${BASE_API}/api/spatial/{path}.json`,ks=`${BASE_API}/api/eta`,Ns=`${BASE_API}/update.json`,qo=document.getElementById("searchAlert"),Et=document.getElementById("searchResult"),Jo=new we("#searchDrawer"),Is="https://mapapi.geodata.gov.hk/gs/api/v1.0.0/xyz/basemap/wgs84/{z}/{x}/{y}.png",Ls="https://mapapi.geodata.gov.hk/gs/api/v1.0.0/xyz/imagery/wgs84/{z}/{x}/{y}.png",Ps="https://mapapi.geodata.gov.hk/gs/api/v1.0.0/xyz/label/hk/tc/wgs84/{z}/{x}/{y}.png",nr='<a target="_blank" href="https://portal.csdi.gov.hk/">&copy; </a><img style="width:16px;height:16px;" src="https://api.hkmapservice.gov.hk/mapapi/landsdlogo.jpg" />',Ur={delay:400,dashArray:[20,40],weight:5,paused:!1,reverse:!1,hardwareAccelerated:!0},Qo='<span class="loader m-3"></span>',Zo={className:"etaPopup",maxWidth:Os()};let ei;const xs=(t,e)=>{let n=`<div class="alert alert-${e}" role="alert"><div>${t}</div></div>`;qo.innerHTML+=n},Bs=()=>{qo.innerHTML=""},$s=()=>{Bs(),Et.innerHTML='<ul class="list-group placeholder-glow"><li class="list-group-item"><span class="placeholder col-12"></span></li><li class="list-group-item"><span class="placeholder col-12"></span></li></ul>';let t=document.getElementById("routeInput").value.toUpperCase();fetch(Xo.replace("{route}",t)).then(e=>e.json()).then(e=>{Et.innerHTML=e.map((n,r)=>he("searchResultRow",{"{{id}}":`route-${r}`,"{{json}}":on(JSON.stringify(n)),"{{companyLogo}}":zt(n.company),"{{companyName}}":n.company,"{{text}}":`${n.orig}${n.dest}`}).outerHTML).join("")}).catch(function(e){console.log(e),xs(`Cannot find route ${t} !`,"danger"),Et.innerHTML=""})},Fs=(t,e)=>{Array.from(document.querySelectorAll(".list-group-item, .dropdown-item")).forEach(function(a){a.classList.remove("active")}),document.getElementById(t).classList.add("active");const n=JSON.parse(an(e));pe.clearLayers(),n.stopList.forEach(a=>{const s={company:n.company,route:n.route,routeId:n.routeId,routeType:n.routeType,routeDesc:`${n.orig}${n.dest}`,dir:n.dir,stop:a.id,name:a.name,address:`${a.lat},${a.long}`,street:a.street,fare:a.fare,fareHoliday:a.fareHoliday};var l=L.marker([a.lat,a.long],s).addTo(xe);l.bindPopup(Qo,Zo),pe.addLayer(l)});let r;const o=xn(n.company,!1),i=xn(n.company,!0);switch(n.company){case"kmb":r=`kmb/${n.route}/${n.dir}_${n.routeType}`;break;case"ctb":r=`ctb/${n.route}/${n.dir}`;break;case"nwfb":r=`nwfb/${n.route}/${n.dir}`;break;case"nlb":r=`nlb/${n.route}/${n.routeId}`;break;case"mtr":r=`mtr/${n.route}/${n.dir}`;break;case"gmb":r="";break}r&&fetch(Cs.replace("{path}",`${r}`)).then(a=>a.json()).then(a=>{let s=L.polyline.antPath(a,{color:o,pluseColor:i,...Ur});pe.addLayer(s)}).catch(function(a){let s=n.stopList.map(c=>[c.lat,c.long]);s=[s];let l=L.polyline.antPath(s,{color:o,pluseColor:i,...Ur});pe.addLayer(l)}),pe.addTo(xe),xe.fitBounds(pe.getBounds()),window.innerWidth<768&&Jo.hide()},Ms=t=>{pe.clearLayers();let e=t.target.closest("div.list-group-item");const n=JSON.parse(an(e.dataset.routeJson)),r=n.address.split(","),o={company:n.company,route:n.route,routeId:n.routeId,routeType:n.routeType,routeDesc:n.routeDesc,dir:n.dir,stop:n.stop,name:n.name,address:n.address,street:n.street,fare:n.fare,fareHoliday:n.fareHoliday};var i=L.marker(r,o).addTo(xe);i.bindPopup(Qo,Zo),pe.addLayer(i),pe.addTo(xe),xe.fitBounds(pe.getBounds()),i.openPopup(),window.innerWidth<768&&Jo.hide()},gn=async t=>fetch(ks,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify([t])}).then(e=>e.json()).then(e=>e[0]).catch(e=>console.error(e)),Rs=async t=>{var e=t.popup._source;let n=he("bookmarkBtn").outerHTML;const r={company:e.options.company,route:e.options.route,routeId:e.options.routeId,routeType:e.options.routeType,routeDesc:e.options.routeDesc,dir:e.options.dir,stop:e.options.stop,name:e.options.name,address:e.options.address,street:e.options.street,fare:e.options.fare,fareHoliday:e.options.fareHoliday,railwayFilterDir:e.options.railwayFilterDir};if(e.options.company==="mtr_hr"){let o={...r,dir:"UT"},i={...r,dir:"DT"},a=[];if(e.options.railwayFilterDir===void 0||e.options.railwayFilterDir&&e.options.railwayFilterDir.contains("UT")){const d=await gn({...e.options,dir:"UT"}).then(p=>p.map(f=>{let g="",m="";return f.eta!=null&&(g+=`${f.dest}`,m=`${Math.max(f.eta,0)}`),f.remark&&(line+=` (${f.remark})`),he("railwayEtaRow",{"{{css}}":`background-color: ${de("route-hr",e.options.routeId)}`,"{{platform}}":f.platform,"{{text}}":g,"{{eta}}":m}).outerHTML}).join("")).catch(()=>"<div></div>");a.push(`<div class="row">
            <div class="col">${d}</div>
            <div class="col-auto">${isBoomarked(o)?n:vn(o)}</div>
            </div>`)}if(e.options.railwayFilterDir===void 0||e.options.railwayFilterDir&&e.options.railwayFilterDir.contains("DT")){const d=await gn({...e.options,dir:"DT"}).then(p=>p.map(f=>{let g="",m="";return f.eta!=null&&(g+=`${f.dest}`,m=`${Math.max(f.eta,0)}`),f.remark&&(line+=` (${f.remark})`),he("railwayEtaRow",{"{{css}}":`background-color: ${de("route-hr",e.options.routeId)}`,"{{platform}}":f.platform,"{{text}}":g,"{{eta}}":m}).outerHTML}).join("")).catch(()=>"<div></div>");a.push(`<div class="row">
            <div class="col">${d}</div>
            <div class="col-auto">${isBoomarked(i)?n:vn(i)}</div>
            </div>`)}const s=a.join('<hr class="my-2">'),l=`background-color: ${de("route-hr",e.options.routeId)}; min-width: 250px;`,c=`background-color: ${de("station-hr",e.options.stop)}; color: ${Vr("station-hr",e.options.stop)};`,u=he("etaPopupRailway",{"{{companyLogo}}":zt(e.options.company),"{{route}}":e.options.route,"{{station}}":e.options.name,"{{titleCss}}":l,"{{stationCss}}":c,"{{body}}":s});e._popup.setContent(u)}else{isBoomarked(e.options)||(n=vn(r));const i=`${await gn(e.options).then(d=>d.map(p=>{let f="<div>";if(e.options.company==="mtr_lr"&&(f+=`<span class="badge rounded-pill text-white me-1" style="background-color: ${de("lr")};">${p.platform}</span>`),p.eta!=null&&(f+=`${Math.max(p.eta,0)}`),p.remark&&(f+=` (${p.remark})`),e.options.company==="mtr_lr"){f+='<div class="float-end">';for(let g=0;g<p.trainLength;g++)f+="";f+="</div>"}return f+="</div>",f}).join("")).catch(()=>"<div></div>")}`;let a=`background-color: ${xn(e.options.company)}`,s="",l="";const c=e.options.routeDesc;e.options.company==="mtr_lr"&&(a=`background-color: ${de("lr")}; color: ${Vr("lr")};`,s=`--border-color: ${de("route-lr",e.options.routeId)};`,l="mtrLrRoute");const u=he("etaPopup",{"{{companyLogo}}":zt(e.options.company),"{{routeNo}}":e.options.route,"{{routeNoClass}}":l,"{{routeNoCss}}":s,"{{title}}":e.options.name,"{{subtitle}}":c,"{{titleCss}}":a,"{{bookmarkBtn}}":n,"{{body}}":i});e._popup.setContent(u)}},vn=(t,e=null)=>{if(e===null){let n=document.querySelectorAll("div.list-group-item.group");n.length==0?(e="",addGroup(e)):e=n[0].dataset.groupName}return`<button class="btn btn-sm btn-outline-warning" onclick="addBookmark('${e}', '${on(JSON.stringify(t))}', true)"><i id="bookmarkPopupIcon" class="bi bi-bookmark-plus" aria-label=""></i></button>`},Hs=t=>{Et.innerHTML="",Array.from(document.querySelectorAll("[data-route-type]")).forEach(function(e){e.dataset.routeType===t?e.classList.remove("d-none"):e.classList.add("d-none")}),t==="mtr"&&(Et.innerHTML=ei.map((e,n)=>he("searchResultRailwayRow",{"{{id}}":`route-${n}`,"{{json}}":on(JSON.stringify(e)),"{{backgroundColor}}":de("route-hr",e.routeId),"{{text}}":`${e.route} (${e.orig}${e.dest})`}).outerHTML).join(""))};document.getElementById("btnSearch").onclick=$s;document.getElementById("routeInput").addEventListener("keypress",function(t){t.key==="Enter"&&(t.preventDefault(),document.getElementById("btnSearch").click())});var pe=new L.FeatureGroup;const ti=L.tileLayer(Is,{maxZoom:20,attribution:nr}),Ws=L.tileLayer(Ls,{maxZoom:20,attribution:nr}),ni=L.tileLayer(Ps,{maxZoom:20,attribution:nr}),js={:ti,:Ws},Ys={:ni},xe=L.map("map",{center:[22.322005998683245,114.17846497109828],zoom:13,layers:[ti,ni]});L.control.layers(js,Ys,{hideSingleBase:!0}).addTo(xe);xe.on("popupopen",Rs);fetch(Ns).then(t=>t.json()).then(t=>{document.getElementById("getSiriShortcut").setAttribute("href",t.url),document.getElementById("siriShortcutVersion").innerHTML=`(v${t.version})`});ei=await fetch(Xo.replace("{route}","mtr_hr")).then(t=>t.json());window.renderRoute=Fs;window.renderBookmarkStop=Ms;window.routeTypeClick=Hs;const Ks="modal",Vs="bs.modal",le=`.${Vs}`,Us=".data-api",Gs="Escape",zs=`hide${le}`,Xs=`hidePrevented${le}`,ri=`hidden${le}`,oi=`show${le}`,qs=`shown${le}`,Js=`resize${le}`,Qs=`click.dismiss${le}`,Zs=`mousedown.dismiss${le}`,el=`keydown.dismiss${le}`,tl=`click${le}${Us}`,Gr="modal-open",nl="fade",zr="show",bn="modal-static",rl=".modal.show",ol=".modal-dialog",il=".modal-body",al='[data-bs-toggle="modal"]',sl={backdrop:!0,focus:!0,keyboard:!0},ll={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ze extends jn{constructor(e,n){super(e,n),this._dialog=W.findOne(ol,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Nn,this._addEventListeners()}static get Default(){return sl}static get DefaultType(){return ll}static get NAME(){return Ks}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||y.trigger(this._element,oi,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Gr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||y.trigger(this._element,zs).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(zr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){y.off(window,le),y.off(this._dialog,le),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new go({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bo({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=W.findOne(il,this._dialog);n&&(n.scrollTop=0),io(this._element),this._element.classList.add(zr);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,y.trigger(this._element,qs,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){y.on(this._element,el,e=>{if(e.key===Gs){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),y.on(window,Js,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),y.on(this._element,Zs,e=>{y.one(this._element,Qs,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Gr),this._resetAdjustments(),this._scrollBar.reset(),y.trigger(this._element,ri)})}_isAnimated(){return this._element.classList.contains(nl)}_triggerBackdropTransition(){if(y.trigger(this._element,Xs).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(bn)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(bn),this._queueCallback(()=>{this._element.classList.remove(bn),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const o=Be()?"paddingLeft":"paddingRight";this._element.style[o]=`${n}px`}if(!r&&e){const o=Be()?"paddingRight":"paddingLeft";this._element.style[o]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=ze.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}y.on(document,tl,al,function(t){const e=W.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),y.one(e,oi,o=>{o.defaultPrevented||y.one(e,ri,()=>{en(this)&&this.focus()})});const n=W.findOne(rl);n&&ze.getInstance(n).hide(),ze.getOrCreateInstance(e).toggle(this)});vo(ze);Rn(ze);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xr(Object(n),!0).forEach(function(r){cl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ht(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ht=function(e){return typeof e}:Ht=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(t)}function cl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Te(){return Te=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Te.apply(this,arguments)}function ul(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function dl(t,e){if(t==null)return{};var n=ul(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var fl="1.15.0";function _e(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var De=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ot=_e(/Edge/i),qr=_e(/firefox/i),yt=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),ii=_e(/iP(ad|od|hone)/i),ai=_e(/chrome/i)&&_e(/android/i),si={capture:!1,passive:!1};function N(t,e,n){t.addEventListener(e,n,!De&&si)}function C(t,e,n){t.removeEventListener(e,n,!De&&si)}function Xt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function pl(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function fe(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xt(t,e):Xt(t,e))||r&&t===n)return t;if(t===n)break}while(t=pl(t))}return null}var Jr=/\s+/g;function ee(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Jr," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Jr," ")}}function E(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ot(t,e){var n="";if(typeof t=="string")n=t;else do{var r=E(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function li(t,e,n){if(t){var r=t.getElementsByTagName(e),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function ve(){var t=document.scrollingElement;return t||document.documentElement}function Y(t,e,n,r,o){if(!(!t.getBoundingClientRect&&t!==window)){var i,a,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==ve()?(i=t.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!De))do if(o&&o.getBoundingClientRect&&(E(o,"transform")!=="none"||n&&E(o,"position")!=="static")){var p=o.getBoundingClientRect();a-=p.top+parseInt(E(o,"border-top-width")),s-=p.left+parseInt(E(o,"border-left-width")),l=a+i.height,c=s+i.width;break}while(o=o.parentNode);if(r&&t!==window){var f=ot(o||t),g=f&&f.a,m=f&&f.d;f&&(a/=m,s/=g,d/=g,u/=m,l=a+u,c=s+d)}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function Qr(t,e,n){for(var r=Le(t,!0),o=Y(t)[e];r;){var i=Y(r)[n],a=void 0;if(n==="top"||n==="left"?a=o>=i:a=o<=i,!a)return r;if(r===ve())break;r=Le(r,!1)}return!1}function ut(t,e,n,r){for(var o=0,i=0,a=t.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==b.ghost&&(r||a[i]!==b.dragged)&&fe(a[i],n.draggable,t,!1)){if(o===e)return a[i];o++}i++}return null}function rr(t,e){for(var n=t.lastElementChild;n&&(n===b.ghost||E(n,"display")==="none"||e&&!Xt(n,e));)n=n.previousElementSibling;return n||null}function ae(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==b.clone&&(!e||Xt(t,e))&&n++;return n}function Zr(t){var e=0,n=0,r=ve();if(t)do{var o=ot(t),i=o.a,a=o.d;e+=t.scrollLeft*i,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode));return[e,n]}function hl(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Le(t,e){if(!t||!t.getBoundingClientRect)return ve();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=E(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ve();if(r||e)return n;r=!0}}while(n=n.parentNode);return ve()}function ml(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function En(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var _t;function ci(t,e){return function(){if(!_t){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),_t=setTimeout(function(){_t=void 0},e)}}}function gl(){clearTimeout(_t),_t=void 0}function ui(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function di(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var ne="Sortable"+new Date().getTime();function vl(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(o){if(!(E(o,"display")==="none"||o===b.ghost)){t.push({target:o,rect:Y(o)});var i=Ee({},t[t.length-1].rect);if(o.thisAnimationDuration){var a=ot(o,!0);a&&(i.top-=a.f,i.left-=a.e)}o.fromRect=i}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(hl(t,{target:r}),1)},animateAll:function(r){var o=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,a=0;t.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=Y(c),p=c.prevFromRect,f=c.prevToRect,g=s.rect,m=ot(c,!0);m&&(d.top-=m.f,d.left-=m.e),c.toRect=d,c.thisAnimationDuration&&En(p,d)&&!En(u,d)&&(g.top-d.top)/(g.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=El(g,p,f,o.options)),En(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=o.options.animation),o.animate(c,g,d,l)),l&&(i=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},a):typeof r=="function"&&r(),t=[]},animate:function(r,o,i,a){if(a){E(r,"transition",""),E(r,"transform","");var s=ot(this.el),l=s&&s.a,c=s&&s.d,u=(o.left-i.left)/(l||1),d=(o.top-i.top)/(c||1);r.animatingX=!!u,r.animatingY=!!d,E(r,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=bl(r),E(r,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),E(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){E(r,"transition",""),E(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},a)}}}}function bl(t){return t.offsetWidth}function El(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Qe=[],yn={initializeByDefault:!0},Ct={mount:function(e){for(var n in yn)yn.hasOwnProperty(n)&&!(n in e)&&(e[n]=yn[n]);Qe.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Qe.push(e)},pluginEvent:function(e,n,r){var o=this;this.eventCanceled=!1,r.cancel=function(){o.eventCanceled=!0};var i=e+"Global";Qe.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][i]&&n[a.pluginName][i](Ee({sortable:n},r)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](Ee({sortable:n},r)))})},initializePlugins:function(e,n,r,o){Qe.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var c=new s(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Te(r,c.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,n){var r={};return Qe.forEach(function(o){typeof o.eventProperties=="function"&&Te(r,o.eventProperties.call(n[o.pluginName],e))}),r},modifyOption:function(e,n,r){var o;return Qe.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(o=i.optionListeners[n].call(e[i.pluginName],r))}),o}};function yl(t){var e=t.sortable,n=t.rootEl,r=t.name,o=t.targetEl,i=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,p=t.originalEvent,f=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[ne],!!e){var m,_=e.options,D="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!De&&!Ot?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=a||n,m.from=s||n,m.item=o||n,m.clone=i,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=p,m.pullMode=f?f.lastPutMode:void 0;var T=Ee(Ee({},g),Ct.getEventProperties(r,e));for(var O in T)m[O]=T[O];n&&n.dispatchEvent(m),_[D]&&_[D].call(e,m)}}var _l=["evt"],Q=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=r.evt,i=dl(r,_l);Ct.pluginEvent.bind(b)(e,n,Ee({dragEl:h,parentEl:H,ghostEl:w,rootEl:$,nextEl:je,lastDownEl:Wt,cloneEl:M,cloneHidden:Ie,dragStarted:ht,putSortable:V,activeSortable:b.active,originalEvent:o,oldIndex:rt,oldDraggableIndex:wt,newIndex:te,newDraggableIndex:ke,hideGhostForTarget:mi,unhideGhostForTarget:gi,cloneNowHidden:function(){Ie=!0},cloneNowShown:function(){Ie=!1},dispatchSortableEvent:function(s){X({sortable:n,name:s,originalEvent:o})}},i))};function X(t){yl(Ee({putSortable:V,cloneEl:M,targetEl:h,rootEl:$,oldIndex:rt,oldDraggableIndex:wt,newIndex:te,newDraggableIndex:ke},t))}var h,H,w,$,je,Wt,M,Ie,rt,te,wt,ke,xt,V,nt=!1,qt=!1,Jt=[],He,ce,_n,wn,eo,to,ht,Ze,At,Tt=!1,Bt=!1,jt,G,An=[],Bn=!1,Qt=[],sn=typeof document<"u",$t=ii,no=Ot||De?"cssFloat":"float",wl=sn&&!ai&&!ii&&"draggable"in document.createElement("div"),fi=function(){if(sn){if(De)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),pi=function(e,n){var r=E(e),o=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=ut(e,0,n),a=ut(e,1,n),s=i&&E(i),l=a&&E(a),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Y(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Y(a).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=o&&r[no]==="none"||a&&r[no]==="none"&&c+u>o)?"vertical":"horizontal"},Al=function(e,n,r){var o=r?e.left:e.top,i=r?e.right:e.bottom,a=r?e.width:e.height,s=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return o===s||i===l||o+a/2===s+c/2},Tl=function(e,n){var r;return Jt.some(function(o){var i=o[ne].options.emptyInsertThreshold;if(!(!i||rr(o))){var a=Y(o),s=e>=a.left-i&&e<=a.right+i,l=n>=a.top-i&&n<=a.bottom+i;if(s&&l)return r=o}}),r},hi=function(e){function n(i,a){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(a||d))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return n(i(s,l,c,u),a)(s,l,c,u);var p=(a?s:l).options.group.name;return i===!0||typeof i=="string"&&i===p||i.join&&i.indexOf(p)>-1}}var r={},o=e.group;(!o||Ht(o)!="object")&&(o={name:o}),r.name=o.name,r.checkPull=n(o.pull,!0),r.checkPut=n(o.put),r.revertClone=o.revertClone,e.group=r},mi=function(){!fi&&w&&E(w,"display","none")},gi=function(){!fi&&w&&E(w,"display","")};sn&&!ai&&document.addEventListener("click",function(t){if(qt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),qt=!1,!1},!0);var We=function(e){if(h){e=e.touches?e.touches[0]:e;var n=Tl(e.clientX,e.clientY);if(n){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[ne]._onDragOver(r)}}},Sl=function(e){h&&h.parentNode[ne]._isOutsideThisEl(e.target)};function b(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Te({},e),t[ne]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:b.supportPointer!==!1&&"PointerEvent"in window&&!yt,emptyInsertThreshold:5};Ct.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);hi(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:wl,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?N(t,"pointerdown",this._onTapStart):(N(t,"mousedown",this._onTapStart),N(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(N(t,"dragover",this),N(t,"dragenter",this)),Jt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Te(this,vl())}b.prototype={constructor:b,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ze=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,o=this.options,i=o.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=o.filter;if(Pl(r),!h&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&yt&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=fe(l,o.draggable,r,!1),!(l&&l.animated)&&Wt!==l)){if(rt=ae(l),wt=ae(l,o.draggable),typeof u=="function"){if(u.call(this,e,l,this)){X({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Q("filter",n,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=fe(c,d.trim(),r,!1),d)return X({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:r,toEl:r}),Q("filter",n,{evt:e}),!0}),u)){i&&e.cancelable&&e.preventDefault();return}o.handle&&!fe(c,o.handle,r,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,r){var o=this,i=o.el,a=o.options,s=i.ownerDocument,l;if(r&&!h&&r.parentNode===i){var c=Y(r);if($=i,h=r,H=h.parentNode,je=h.nextSibling,Wt=r,xt=a.group,b.dragged=h,He={target:h,clientX:(n||e).clientX,clientY:(n||e).clientY},eo=He.clientX-c.left,to=He.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,h.style["will-change"]="all",l=function(){if(Q("delayEnded",o,{evt:e}),b.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!qr&&o.nativeDraggable&&(h.draggable=!0),o._triggerDragStart(e,n),X({sortable:o,name:"choose",originalEvent:e}),ee(h,a.chosenClass,!0)},a.ignore.split(",").forEach(function(u){li(h,u.trim(),Tn)}),N(s,"dragover",We),N(s,"mousemove",We),N(s,"touchmove",We),N(s,"mouseup",o._onDrop),N(s,"touchend",o._onDrop),N(s,"touchcancel",o._onDrop),qr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),Q("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Ot||De))){if(b.eventCanceled){this._onDrop();return}N(s,"mouseup",o._disableDelayedDrag),N(s,"touchend",o._disableDelayedDrag),N(s,"touchcancel",o._disableDelayedDrag),N(s,"mousemove",o._delayedDragTouchMoveHandler),N(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&N(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&Tn(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._disableDelayedDrag),C(e,"touchend",this._disableDelayedDrag),C(e,"touchcancel",this._disableDelayedDrag),C(e,"mousemove",this._delayedDragTouchMoveHandler),C(e,"touchmove",this._delayedDragTouchMoveHandler),C(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?N(document,"pointermove",this._onTouchMove):n?N(document,"touchmove",this._onTouchMove):N(document,"mousemove",this._onTouchMove):(N(h,"dragend",this),N($,"dragstart",this._onDragStart));try{document.selection?Yt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(nt=!1,$&&h){Q("dragStarted",this,{evt:n}),this.nativeDraggable&&N(document,"dragover",Sl);var r=this.options;!e&&ee(h,r.dragClass,!1),ee(h,r.ghostClass,!0),b.active=this,e&&this._appendGhost(),X({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,mi();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY),e!==n);)n=e;if(h.parentNode[ne]._isOutsideThisEl(e),n)do{if(n[ne]){var r=void 0;if(r=n[ne]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gi()}},_onTouchMove:function(e){if(He){var n=this.options,r=n.fallbackTolerance,o=n.fallbackOffset,i=e.touches?e.touches[0]:e,a=w&&ot(w,!0),s=w&&a&&a.a,l=w&&a&&a.d,c=$t&&G&&Zr(G),u=(i.clientX-He.clientX+o.x)/(s||1)+(c?c[0]-An[0]:0)/(s||1),d=(i.clientY-He.clientY+o.y)/(l||1)+(c?c[1]-An[1]:0)/(l||1);if(!b.active&&!nt){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(w){a?(a.e+=u-(_n||0),a.f+=d-(wn||0)):a={a:1,b:0,c:0,d:1,e:u,f:d};var p="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");E(w,"webkitTransform",p),E(w,"mozTransform",p),E(w,"msTransform",p),E(w,"transform",p),_n=u,wn=d,ce=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!w){var e=this.options.fallbackOnBody?document.body:$,n=Y(h,!0,$t,!0,e),r=this.options;if($t){for(G=e;E(G,"position")==="static"&&E(G,"transform")==="none"&&G!==document;)G=G.parentNode;G!==document.body&&G!==document.documentElement?(G===document&&(G=ve()),n.top+=G.scrollTop,n.left+=G.scrollLeft):G=ve(),An=Zr(G)}w=h.cloneNode(!0),ee(w,r.ghostClass,!1),ee(w,r.fallbackClass,!0),ee(w,r.dragClass,!0),E(w,"transition",""),E(w,"transform",""),E(w,"box-sizing","border-box"),E(w,"margin",0),E(w,"top",n.top),E(w,"left",n.left),E(w,"width",n.width),E(w,"height",n.height),E(w,"opacity","0.8"),E(w,"position",$t?"absolute":"fixed"),E(w,"zIndex","100000"),E(w,"pointerEvents","none"),b.ghost=w,e.appendChild(w),E(w,"transform-origin",eo/parseInt(w.style.width)*100+"% "+to/parseInt(w.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,o=e.dataTransfer,i=r.options;if(Q("dragStart",this,{evt:e}),b.eventCanceled){this._onDrop();return}Q("setupClone",this),b.eventCanceled||(M=di(h),M.removeAttribute("id"),M.draggable=!1,M.style["will-change"]="",this._hideClone(),ee(M,this.options.chosenClass,!1),b.clone=M),r.cloneId=Yt(function(){Q("clone",r),!b.eventCanceled&&(r.options.removeCloneOnHide||$.insertBefore(M,h),r._hideClone(),X({sortable:r,name:"clone"}))}),!n&&ee(h,i.dragClass,!0),n?(qt=!0,r._loopId=setInterval(r._emulateDragOver,50)):(C(document,"mouseup",r._onDrop),C(document,"touchend",r._onDrop),C(document,"touchcancel",r._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(r,o,h)),N(document,"drop",r),E(h,"transform","translateZ(0)")),nt=!0,r._dragStartId=Yt(r._dragStarted.bind(r,n,e)),N(document,"selectstart",r),ht=!0,yt&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,o,i,a,s=this.options,l=s.group,c=b.active,u=xt===l,d=s.sort,p=V||c,f,g=this,m=!1;if(Bn)return;function _(ue,ye){Q(ue,g,Ee({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:a,dragRect:o,targetRect:i,canSort:d,fromSortable:p,target:r,completed:T,onMove:function(qe,Fe){return Ft($,n,h,o,qe,Y(qe),e,Fe)},changed:O},ye))}function D(){_("dragOverAnimationCapture"),g.captureAnimationState(),g!==p&&p.captureAnimationState()}function T(ue){return _("dragOverCompleted",{insertion:ue}),ue&&(u?c._hideClone():c._showClone(g),g!==p&&(ee(h,V?V.options.ghostClass:c.options.ghostClass,!1),ee(h,s.ghostClass,!0)),V!==g&&g!==b.active?V=g:g===b.active&&V&&(V=null),p===g&&(g._ignoreWhileAnimating=r),g.animateAll(function(){_("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===h&&!h.animated||r===n&&!r.animated)&&(Ze=null),!s.dragoverBubble&&!e.rootEl&&r!==document&&(h.parentNode[ne]._isOutsideThisEl(e.target),!ue&&We(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function O(){te=ae(h),ke=ae(h,s.draggable),X({sortable:g,name:"change",toEl:n,newIndex:te,newDraggableIndex:ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=fe(r,s.draggable,n,!0),_("dragOver"),b.eventCanceled)return m;if(h.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||g._ignoreWhileAnimating===r)return T(!1);if(qt=!1,c&&!s.disabled&&(u?d||(a=H!==$):V===this||(this.lastPutMode=xt.checkPull(this,c,h,e))&&l.checkPut(this,c,h,e))){if(f=this._getDirection(e,r)==="vertical",o=Y(h),_("dragOverValid"),b.eventCanceled)return m;if(a)return H=$,D(),this._hideClone(),_("revert"),b.eventCanceled||(je?$.insertBefore(h,je):$.appendChild(h)),T(!0);var v=rr(n,s.draggable);if(!v||kl(e,f,this)&&!v.animated){if(v===h)return T(!1);if(v&&n===e.target&&(r=v),r&&(i=Y(r)),Ft($,n,h,o,r,i,e,!!r)!==!1)return D(),v&&v.nextSibling?n.insertBefore(h,v.nextSibling):n.appendChild(h),H=n,O(),T(!0)}else if(v&&Cl(e,f,this)){var S=ut(n,0,s,!0);if(S===h)return T(!1);if(r=S,i=Y(r),Ft($,n,h,o,r,i,e,!1)!==!1)return D(),n.insertBefore(h,S),H=n,O(),T(!0)}else if(r.parentNode===n){i=Y(r);var A=0,I,F=h.parentNode!==n,k=!Al(h.animated&&h.toRect||o,r.animated&&r.toRect||i,f),P=f?"top":"left",x=Qr(r,"top","top")||Qr(h,"top","top"),K=x?x.scrollTop:void 0;Ze!==r&&(I=i[P],Tt=!1,Bt=!k&&s.invertSwap||F),A=Nl(e,r,i,f,k?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Bt,Ze===r);var B;if(A!==0){var z=ae(h);do z-=A,B=H.children[z];while(B&&(E(B,"display")==="none"||B===w))}if(A===0||B===r)return T(!1);Ze=r,At=A;var Z=r.nextElementSibling,R=!1;R=A===1;var U=Ft($,n,h,o,r,i,e,R);if(U!==!1)return(U===1||U===-1)&&(R=U===1),Bn=!0,setTimeout(Ol,30),D(),R&&!Z?n.appendChild(h):r.parentNode.insertBefore(h,R?Z:r),x&&ui(x,0,K-x.scrollTop),H=h.parentNode,I!==void 0&&!Bt&&(jt=Math.abs(I-Y(r)[P])),O(),T(!0)}if(n.contains(h))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){C(document,"mousemove",this._onTouchMove),C(document,"touchmove",this._onTouchMove),C(document,"pointermove",this._onTouchMove),C(document,"dragover",We),C(document,"mousemove",We),C(document,"touchmove",We)},_offUpEvents:function(){var e=this.el.ownerDocument;C(e,"mouseup",this._onDrop),C(e,"touchend",this._onDrop),C(e,"pointerup",this._onDrop),C(e,"touchcancel",this._onDrop),C(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(te=ae(h),ke=ae(h,r.draggable),Q("drop",this,{evt:e}),H=h&&h.parentNode,te=ae(h),ke=ae(h,r.draggable),b.eventCanceled){this._nulling();return}nt=!1,Bt=!1,Tt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$n(this.cloneId),$n(this._dragStartId),this.nativeDraggable&&(C(document,"drop",this),C(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yt&&E(document.body,"user-select",""),E(h,"transform",""),e&&(ht&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),($===H||V&&V.lastPutMode!=="clone")&&M&&M.parentNode&&M.parentNode.removeChild(M),h&&(this.nativeDraggable&&C(h,"dragend",this),Tn(h),h.style["will-change"]="",ht&&!nt&&ee(h,V?V.options.ghostClass:this.options.ghostClass,!1),ee(h,this.options.chosenClass,!1),X({sortable:this,name:"unchoose",toEl:H,newIndex:null,newDraggableIndex:null,originalEvent:e}),$!==H?(te>=0&&(X({rootEl:H,name:"add",toEl:H,fromEl:$,originalEvent:e}),X({sortable:this,name:"remove",toEl:H,originalEvent:e}),X({rootEl:H,name:"sort",toEl:H,fromEl:$,originalEvent:e}),X({sortable:this,name:"sort",toEl:H,originalEvent:e})),V&&V.save()):te!==rt&&te>=0&&(X({sortable:this,name:"update",toEl:H,originalEvent:e}),X({sortable:this,name:"sort",toEl:H,originalEvent:e})),b.active&&((te==null||te===-1)&&(te=rt,ke=wt),X({sortable:this,name:"end",toEl:H,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Q("nulling",this),$=h=H=w=je=M=Wt=Ie=He=ce=ht=te=ke=rt=wt=Ze=At=V=xt=b.dragged=b.ghost=b.clone=b.active=null,Qt.forEach(function(e){e.checked=!0}),Qt.length=_n=wn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),Dl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,o=0,i=r.length,a=this.options;o<i;o++)n=r[o],fe(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||Ll(n));return e},sort:function(e,n){var r={},o=this.el;this.toArray().forEach(function(i,a){var s=o.children[a];fe(s,this.options.draggable,o,!1)&&(r[i]=s)},this),n&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(o.removeChild(r[i]),o.appendChild(r[i]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return fe(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var o=Ct.modifyOption(this,e,n);typeof o<"u"?r[e]=o:r[e]=n,e==="group"&&hi(r)},destroy:function(){Q("destroy",this);var e=this.el;e[ne]=null,C(e,"mousedown",this._onTapStart),C(e,"touchstart",this._onTapStart),C(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(C(e,"dragover",this),C(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jt.splice(Jt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ie){if(Q("hideClone",this),b.eventCanceled)return;E(M,"display","none"),this.options.removeCloneOnHide&&M.parentNode&&M.parentNode.removeChild(M),Ie=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ie){if(Q("showClone",this),b.eventCanceled)return;h.parentNode==$&&!this.options.group.revertClone?$.insertBefore(M,h):je?$.insertBefore(M,je):$.appendChild(M),this.options.group.revertClone&&this.animate(h,M),E(M,"display",""),Ie=!1}}};function Dl(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ft(t,e,n,r,o,i,a,s){var l,c=t[ne],u=c.options.onMove,d;return window.CustomEvent&&!De&&!Ot?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=o||e,l.relatedRect=i||Y(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),u&&(d=u.call(c,l,a)),d}function Tn(t){t.draggable=!1}function Ol(){Bn=!1}function Cl(t,e,n){var r=Y(ut(n.el,0,n.options,!0)),o=10;return e?t.clientX<r.left-o||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-o||t.clientY<r.bottom&&t.clientX<r.left}function kl(t,e,n){var r=Y(rr(n.el,n.options.draggable)),o=10;return e?t.clientX>r.right+o||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+o}function Nl(t,e,n,r,o,i,a,s){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,p=!1;if(!a){if(s&&jt<c*o){if(!Tt&&(At===1?l>u+c*i/2:l<d-c*i/2)&&(Tt=!0),Tt)p=!0;else if(At===1?l<u+jt:l>d-jt)return-At}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return Il(e)}return p=p||a,p&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function Il(t){return ae(h)<ae(t)?1:-1}function Ll(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Pl(t){Qt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Qt.push(r)}}function Yt(t){return setTimeout(t,0)}function $n(t){return clearTimeout(t)}sn&&N(document,"touchmove",function(t){(b.active||nt)&&t.cancelable&&t.preventDefault()});b.utils={on:N,off:C,css:E,find:li,is:function(e,n){return!!fe(e,n,e,!1)},extend:ml,throttle:ci,closest:fe,toggleClass:ee,clone:di,index:ae,nextTick:Yt,cancelNextTick:$n,detectDirection:pi,getChild:ut};b.get=function(t){return t[ne]};b.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(b.utils=Ee(Ee({},b.utils),r.utils)),Ct.mount(r)})};b.create=function(t,e){return new b(t,e)};b.version=fl;var j=[],mt,Fn,Mn=!1,Sn,Dn,Zt,gt;function xl(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):this.options.supportPointer?N(document,"pointermove",this._handleFallbackAutoScroll):r.touches?N(document,"touchmove",this._handleFallbackAutoScroll):N(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):(C(document,"pointermove",this._handleFallbackAutoScroll),C(document,"touchmove",this._handleFallbackAutoScroll),C(document,"mousemove",this._handleFallbackAutoScroll)),ro(),Kt(),gl()},nulling:function(){Zt=Fn=mt=Mn=gt=Sn=Dn=null,j.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var o=this,i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,a);if(Zt=n,r||this.options.forceAutoScrollFallback||Ot||De||yt){On(n,this.options,s,r);var l=Le(s,!0);Mn&&(!gt||i!==Sn||a!==Dn)&&(gt&&ro(),gt=setInterval(function(){var c=Le(document.elementFromPoint(i,a),!0);c!==l&&(l=c,Kt()),On(n,o.options,c,r)},10),Sn=i,Dn=a)}else{if(!this.options.bubbleScroll||Le(s,!0)===ve()){Kt();return}On(n,this.options,Le(s,!1),!1)}}},Te(t,{pluginName:"scroll",initializeByDefault:!0})}function Kt(){j.forEach(function(t){clearInterval(t.pid)}),j=[]}function ro(){clearInterval(gt)}var On=ci(function(t,e,n,r){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=ve(),c=!1,u;Fn!==n&&(Fn=n,Kt(),mt=e.scroll,u=e.scrollFn,mt===!0&&(mt=Le(n,!0)));var d=0,p=mt;do{var f=p,g=Y(f),m=g.top,_=g.bottom,D=g.left,T=g.right,O=g.width,v=g.height,S=void 0,A=void 0,I=f.scrollWidth,F=f.scrollHeight,k=E(f),P=f.scrollLeft,x=f.scrollTop;f===l?(S=O<I&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),A=v<F&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(S=O<I&&(k.overflowX==="auto"||k.overflowX==="scroll"),A=v<F&&(k.overflowY==="auto"||k.overflowY==="scroll"));var K=S&&(Math.abs(T-o)<=a&&P+O<I)-(Math.abs(D-o)<=a&&!!P),B=A&&(Math.abs(_-i)<=a&&x+v<F)-(Math.abs(m-i)<=a&&!!x);if(!j[d])for(var z=0;z<=d;z++)j[z]||(j[z]={});(j[d].vx!=K||j[d].vy!=B||j[d].el!==f)&&(j[d].el=f,j[d].vx=K,j[d].vy=B,clearInterval(j[d].pid),(K!=0||B!=0)&&(c=!0,j[d].pid=setInterval(function(){r&&this.layer===0&&b.active._onTouchMove(Zt);var Z=j[this.layer].vy?j[this.layer].vy*s:0,R=j[this.layer].vx?j[this.layer].vx*s:0;typeof u=="function"&&u.call(b.dragged.parentNode[ne],R,Z,t,Zt,j[this.layer].el)!=="continue"||ui(j[this.layer].el,R,Z)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==l&&(p=Le(p,!1)));Mn=c}},30),vi=function(e){var n=e.originalEvent,r=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||i;s();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(a("spill"),this.onSpill({dragEl:o,putSortable:r}))}};function or(){}or.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var o=ut(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:vi};Te(or,{pluginName:"revertOnSpill"});function ir(){}ir.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,o=r||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:vi};Te(ir,{pluginName:"removeOnSpill"});b.mount(new xl);b.mount(ir,or);const bi=document.getElementById("bookmarkList"),ar="##",sr=`
`,Bl=new ze("#addGroupModal"),lr=t=>{t?([document.getElementById("btnBookmarkEdit"),document.getElementById("btnBookmarkDownload"),document.getElementById("btnBookmarkUpload")].forEach((e,n,r)=>{e.classList.add("d-none")}),[document.getElementById("btnBookmarkGroupAdd"),...document.getElementsByClassName("btnBookmarkGroupEdit"),document.getElementById("btnBookmarkSave"),document.getElementById("btnBookmarkReset"),...document.getElementsByClassName("btnBookmarkReorder"),...document.getElementsByClassName("btnBookmarkRemove")].forEach((e,n,r)=>{e.classList.remove("d-none")})):([document.getElementById("btnBookmarkEdit"),document.getElementById("btnBookmarkDownload"),document.getElementById("btnBookmarkUpload")].forEach((e,n,r)=>{e.classList.remove("d-none")}),[document.getElementById("btnBookmarkGroupAdd"),...document.getElementsByClassName("btnBookmarkGroupEdit"),document.getElementById("btnBookmarkSave"),document.getElementById("btnBookmarkReset"),...document.getElementsByClassName("btnBookmarkReorder"),...document.getElementsByClassName("btnBookmarkRemove")].forEach((e,n,r)=>{e.classList.add("d-none")}))},cr=t=>{document.getElementById("groupNameInput").value.length>0&&(t=document.getElementById("groupNameInput").value,document.getElementById("groupNameInput").value="",Bl.hide());const e=he("bookmarkGroup",{"{{name}}":t}),n=he("bookmarkRoute");e.appendChild(n),bi.appendChild(e),new b(n,{handle:".btnBookmarkReorder",group:"route",animation:150})},$l=t=>{t.target.closest("div.list-group-item.group").remove()},Ei=(t,e,n=!1)=>{n&&(e=JSON.parse(an(e)));let r="",o="";e.company==="mtr_hr"?r=`background-color: ${de("route-hr",e.routeId)}!important;`:e.company==="mtr_lr"&&(r=`--border-color: ${de("route-lr",e.routeId)}; background-color: #fff!important;`,o="mtrLrRoute p-0");const i=he("bookmarkRow",{"{{dataRouteJson}}":on(JSON.stringify(e)),"{{companyLogo}}":zt(e.company),"{{route}}":e.route,"{{name}}":e.name,"{{routeDesc}}":e.routeDesc,"{{routeCss}}":r,"{{routeClass}}":o});document.querySelectorAll(`div[data-group-name="${t}"] .list-group.route`)[0].appendChild(i),n&&yi()},Fl=t=>{t.target.closest("div.list-group-item").remove()},Ml=()=>{lr(!0)},yi=()=>{lr(!1);const t=[...document.getElementsByClassName("list-group-item")].map(e=>{const n=e.getAttribute("data-group-name");if(n){const r=[...e.querySelectorAll(".list-group-item")].map(o=>an(o.getAttribute("data-route-json"))).join(ar);return JSON.stringify({[n]:r})}else return null}).filter(e=>!!e).join(sr);localStorage.setItem("bookmarkList",t)},ur=()=>{lr(!1),bi.innerHTML="";let t=[];localStorage.hasOwnProperty("bookmarkList")&&(t=localStorage.getItem("bookmarkList").split(sr).map(e=>{const n=JSON.parse(e);return Object.entries(n).map(r=>({[r[0]]:r[1].split(ar).map(o=>JSON.parse(o))}))})),t.forEach(e=>{const n=Object.entries(e[0])[0];cr(n[0]),n[1].forEach(r=>Ei(n[0],r))})},Rl=()=>{let t="";localStorage.hasOwnProperty("bookmarkList")&&(t=localStorage.getItem("bookmarkList"));let e=document.createElement("a"),n=new Blob([t],{type:"application/octet-stream"}),r=URL.createObjectURL(n);e.setAttribute("href",r),e.setAttribute("download","group"),e.click()},Hl=t=>{const e=new FileReader;e.onload=n=>{localStorage.setItem("bookmarkList",n.target.result),ur()},e.onerror=n=>console.error(n),e.readAsText(t.target.files[0])},Wl=t=>localStorage.hasOwnProperty("bookmarkList")?localStorage.getItem("bookmarkList").split(sr).some(e=>{const n=JSON.parse(e);return Object.entries(n).some(r=>r[1].split(ar).some(o=>{const i=JSON.parse(o);let a=i.company===t.company&&i.routeId===t.routeId&&i.stop===t.stop;switch(t.company){case"kmb":a=a&&i.routeType===t.routeType&&i.dir===t.dir;break;case"ctb":case"nwfb":case"mtr":case"mtr_hr":case"mtr_lr":a=a&&i.dir===t.dir;break;case"gmb":a=a&&i.routeType===t.routeType;break}return a}))}):!1;document.getElementById("btnBookmarkEdit").onclick=Ml;document.getElementById("btnBookmarkSave").onclick=yi;document.getElementById("btnBookmarkReset").onclick=ur;document.getElementById("btnBookmarkGroupAddSubmit").onclick=cr;document.getElementById("btnBookmarkDownload").onclick=Rl;document.getElementById("fileUploadInput").addEventListener("change",Hl,!1);ur();new b(document.getElementById("bookmarkList"),{handle:".btnBookmarkReorder",group:"group",animation:150});window.addGroup=cr;window.removeGroup=$l;window.addBookmark=Ei;window.removeBookmark=Fl;window.isBoomarked=Wl;
